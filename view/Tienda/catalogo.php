<div id="carousel_Categorias" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="0" class="active"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="1"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="2"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="3"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="4"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="5"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="6"></li>
        <li data-target="#carousel_Categorias" style="background:#DDBEA9;width:30%" data-slide-to="7"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/1_alfombra1.jpg) center/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Mira las nuevas alfombras!</h5>
                        <p>Desde $15.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/2_cojin1.jpg) center/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Tan cómodos cojines!</h5>
                        <p>Desde $10.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/3_tapete1.jpg) center/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Detalla los nuevas tapetes!</h5>
                        <p>Desde $20.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/4_mantenimiento1.jpg) top/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Siente la limpieza!</h5>
                        <p>Desde $25.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/1_alfombra2.jpg) bottom/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Disfruta de los nuevos diseños!</h5>
                        <p>Desde $15.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/2_cojin2.jpg) center/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Suaves con tu forma!</h5>
                        <p>Desde $10.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/3_tapete2.jpg) top/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Variedad de expresiones!</h5>
                        <p>Desde $20.000</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="w-100 d-block size-productos" style="background: url(images/Productos/imagenes/4_mantenimiento2.jpg) center/cover;height:70vh !important;">
                <div class="w-100 h-100 carousel-Categorias">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>¡Nuevo diseño!</h5>
                        <p>Desde $205.000</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a class="carousel-control-prev" href="#carousel_Categorias" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Anterior</span>
    </a>
    <a class="carousel-control-next" href="#carousel_Categorias" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Siguiente</span>
    </a>
</div>

<div class="col-md-8 mx-auto px-2 sticky-top" style="margin-left: 370px !important;border-radius:0px 0px 20px 20px;background: #6d6d57 !important;top: 61px;">
    <nav class="navbar navbar-expand-lg row">
        <ul class="navbar-nav text-light mx-auto" id="cont_porCategoria" data-url="<?php echo getUrl("Tienda","Tienda","porCategoria",false,"ajax") ?>" data-url-barra="<?php echo getUrl("Tienda","Tienda","porCategoriaBarra",false,"ajax") ?>">
            <li id="1" class="nav-item nav-link navbar-horizontal-tienda porCategoria">Alfombras</li>
            <li id="2" class="nav-item nav-link navbar-horizontal-tienda porCategoria">Tapetes</li>
            <li id="3" class="nav-item nav-link navbar-horizontal-tienda porCategoria">Cojines</li>
            <li id="4" class="nav-item nav-link navbar-horizontal-tienda porCategoria">Productos de Mantenimiento</li>
        </ul>
    </nav>
</div>
<div class="row" style="background:#DDBEA9;padding: 70px 20px 20px; position: relative; top: -56px; margin: 0;">    
    <!-- Topbar Search -->
    <form class="d-sm-inline-block form-inline ml-auto navbar-search" style="margin-right: 9rem;">
        <div class="input-group">
            <input type="text" class="form-control bg-light border-0 small" name="buscar" id="filtroTienda" data-url="<?php echo getUrl("Tienda","Tienda","filtroCatalogo", false, "ajax");?>" placeholder="Buscar..." aria-label="Search" aria-describedby="basic-addon2">
            <div class="input-group-append">
                <div class="btn" style="background:#CB997E; cursor:auto;">
                    <i class="fas fa-search fa-sm"></i>
                </div>
            </div>
        </div>
    </form>    
</div>

<div class="row col-md-12 m-0 p-0" style="margin-top:-56px !important">
  
        <div class="d-inline-block " style="width:21vw; background:#DDBEA9">
            <div class="sticky-top" style="height:100vh; overflow-y: scroll; padding-top:90px;">
                <div class="bg-light  " style="border-radius: 29px; padding: 20px; margin: 0px 34px 20px;" id="Cat" data-filtro="">
                    <span class="font-weight-bold">Filtrar por Categoría:</span>
                    <div class="ml-3">
                        <?php
                            while ($cat = mysqli_fetch_assoc($categorias)) {
                        ?>
                            <div class="input-group-prepend">
                                <div class="px-2">
                                    <label id="<?php echo 'Cat'.$cat['Cat_Id']; ?>" class="valorCat porFiltro"><?php echo $cat['Cat_Nombre']; ?></label>
                                </div>
                            </div>
                        <?php
                            }
                        ?>
                    </div>
                </div>
                <div class="bg-light " style="border-radius: 29px; padding: 20px; margin: 0px 34px 20px;"  id="Prv" data-filtro="">
                    <span class="font-weight-bold">Filtrar por Proveedor:</span>
                    <div class="ml-3" id="scroll">
                        <?php
                            while ($prov = mysqli_fetch_assoc($proveedores)) {
                        ?>
                            <div class="input-group-prepend">
                                <div class="px-2">
                                    <label id="<?php echo 'Prv'.$prov['Prov_Id']; ?>" class="valorPrv porFiltro"><?php echo $prov['Prov_Nombre']; ?></label>
                                </div>
                            </div>
                        <?php
                            }
                        ?>
                    </div>
                </div>
                <div class="bg-light" style="border-radius: 29px; padding: 20px; margin: 0px 34px 20px;"  id="Col" data-filtro="">
                        <span class="font-weight-bold">Filtrar por Color:</span>
                    <div class="ml-3" id="scroll">
                        <?php
                            while ($col = mysqli_fetch_assoc($colores)) {
                        ?>
                            <div class="input-group-prepend">
                                <div class="px-2">
                                    <label id="<?php echo 'Col'.$col['Col_Id']; ?>" class="valorCol porFiltro"><?php echo $col['Col_Nombre']; ?></label>
                                </div>
                            </div>
                        <?php
                            }
                        ?>
                    </div>
                </div>
            </div>
   </div>
    <div class="d-inline-block" style="background:#b7b7a4; width: 78.655% !important; max-width: 77.75vw !important; min-width: 50vw !important;">
        <div class="d-flex flex-wrap" style="justify-content: space-evenly;" id="catalogoProductos">
            <?php
            if (mysqli_fetch_row($productos) > 0) {
                foreach ($productos as $pro) {
            ?>
                <div class="card box-shadow my-3" style="width: 20%;background:#FFF1E6;min-width: 240px;">
                    <div class="position-relative">
                        
                        <img class="card-img-top size-productos" style="height: 10rem; object-position: center;" src="<?php echo $pro['Pro_Imagen']; ?>" alt="Imagen de <?php echo $pro['Pro_Nombre']; ?>">
                    </div>
                    <div class="card-body pt-2">

                        <h5 class="card-title text-left font-weight-bold mb-0">
                            <?php
                                if (strlen($pro['Pro_Nombre']) < 40) {
                                    echo $pro['Pro_Nombre']; 
                                } else {
                                    echo substr($pro['Pro_Nombre'],0,35)."...";
                                }
                            ?>
                        </h5>
                        <p>
                            <?php echo $pro['Cat_Nombre']; ?>
                        </p>
                        <?php  if ($pro['Pro_Descuento'] != 0) {  ?>
                            <p  class='text-dark font-weight-bold' style="margin-bottom: 0;">
                                <?php 
                                    echo "<span style='color: #afaaaa; text-decoration: line-through;'>$".number_format($pro['Pro_Precio'])."</span> - ".$pro['Pro_Descuento']."%";
                                ?>
                            </p>
                        <?php } ?>
                        <p style="color:#674d3f;font-weight:bold;font-size:1.5rem">
                            <?php 
                                if ($pro['Pro_Descuento'] != 0) {
                                    echo "$".number_format($pro['Pro_Precio'] - (($pro['Pro_Precio'] * $pro['Pro_Descuento']) / 100));
                                } else { 
                                    echo "$".number_format($pro['Pro_Precio']);
                                }
                            ?>
                        </p>

                        <span class="font-weight-bold w-60">Color:</span> <p class="w-100"><?php echo $pro['Col_Nombre'] ?></p>
                        <div class="row col-md-12 m-0">
                            <button class="btn mb-3 mx-auto text-light detallesCarrito" data-url="<?php echo getUrl("Carrito", "Carrito","verDetalles",false, "ajax"); ?>" id="<?php echo $pro['Pro_Id']; ?>" style="background: #676762; border: 0;">
                                <i class="fas fa-cart-plus text-light"></i>
                                Añadir al carrito
                            </button>
                        </div>
                    </div>            
                </div>
            <?php
                }
            } else {                
                echo "<span class='pb-5'>No hay productos que mostrar.</span>";
            }
            ?>
        </div>
    </div>
</div>
    
<!-- Footer -->
    <?php 
        include_once '../view/partials/footer.php';
    ?>
<!-- End of Footer -->